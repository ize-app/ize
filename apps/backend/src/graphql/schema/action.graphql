type Mutation {
  testWebhook(inputs: TestWebhookArgs!): Boolean!
}

union Action =
  | CallWebhook
  | EvolveFlow
  | TriggerStep
  | GroupUpdateMetadata
  | GroupUpdateMembership
  | GroupWatchFlow
  | GroupUpdateNotifications

type ActionExecution {
  actionId: String!
  lastAttemptedAt: String
  status: Status!
}

type CallWebhook {
  locked: Boolean!
  webhookId: String!
  filterOption: Option
  uri: String!
  name: String!
}

type EvolveFlow {
  locked: Boolean!
  filterOption: Option
}

type TriggerStep {
  locked: Boolean!
  filterOption: Option
}

type GroupUpdateMetadata {
  locked: Boolean!
  filterOption: Option
}

type GroupUpdateMembership {
  locked: Boolean!
  filterOption: Option
}

type GroupWatchFlow {
  locked: Boolean!
  filterOption: Option
}

type GroupUpdateNotifications {
  locked: Boolean!
  filterOption: Option
}

# mirrors Prisma type + "None" type
enum ActionType {
  CallWebhook
  TriggerStep
  EvolveFlow
  GroupUpdateMetadata
  GroupUpdateMembership
  GroupWatchFlow
  GroupUpdateNotifications
  None
}

input CallWebhookArgs {
  webhookId: String!
  uri: String!
  originalUri: String
  name: String!
}

input ActionArgs {
  type: ActionType!
  filterResponseFieldIndex: Int
  filterOptionIndex: Int
  callWebhook: CallWebhookArgs
  locked: Boolean!
}

input TestWebhookArgs {
  flowName: String!
  uri: String!
  requestFields: [WebhookValueArgs!]!
  results: [WebhookValueArgs!]!
}

type WebhookPayload {
  flowName: String!
  requestName: String!
  createdAt: String!
  requestFields: [WebhookValue!]!
  results: [WebhookValue!]!
}

type WebhookValue {
  fieldName: String!
  value: String
  optionSelections: [String!]
}

input WebhookValueArgs {
  fieldName: String!
  fieldType: FieldType!
}
