mutation NewRequest($processId: String!, $requestInputs: [RequestInputArgs!]) {
  newRequest(processId: $processId, requestInputs: $requestInputs)
}

mutation NewResponse($requestId: String!, $optionId: String!) {
  newResponse(requestId: $requestId, optionId: $optionId)
}

query Request($requestId: String!) {
  request(requestId: $requestId) {
    ...RequestSummaryParts
  }
}

query RequestsForGroup($groupId: String!) {
  requestsForGroup(groupId: $groupId) {
    ...RequestSummaryParts
  }
}

query RequestsForCurrentUser($groups: [String!]!) {
  requestsForCurrentUser(groups: $groups) {
    ...RequestSummaryParts
  }
}

query RequestsForProcess($processId: String!) {
  requestsForProcess(processId: $processId) {
    ...RequestSummaryParts
  }
}

fragment RequestSummaryParts on Request {
  id
  name
  creator {
    ...UserSummaryParts
  }
  process {
    ...ProcessSummaryParts
  }
  expirationDate
  inputs {
    ...RequestInputSummaryParts
  }
  createdAt
  responses {
    ...ResponsesSummaryParts
  }
}

fragment RequestInputSummaryParts on RequestInput {
  inputTemplateId
  requestInputId
  name
  description
  type
  value
  required
}

fragment ResponsesSummaryParts on Responses {
  userResponse {
    ...ResponseSummaryParts
  }
  allResponses {
    ...ResponseSummaryParts
  }
  responseCount {
    ...ResponseCountSummaryParts
  }
}

fragment ResponseSummaryParts on Response {
  optionId
  value
  user {
    ...UserSummaryParts
  }
  type
  createdAt
}

fragment ResponseCountSummaryParts on ResponseCount {
  optionId
  value
  type
  count
}
